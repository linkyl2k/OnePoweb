{% extends "base.html" %}
{% block content %}
<div class="container my-5" style="max-width: 600px;">
  
  <!-- Header -->
  <div class="text-center mb-4">
    <div style="width: 64px; height: 64px; border-radius: 16px; background: linear-gradient(135deg, {% if plan == 'pro' %}#10b981, #34d399{% else %}#2ea0ff, #34c3ff{% endif %}); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; box-shadow: 0 8px 24px {% if plan == 'pro' %}rgba(16,185,129,0.3){% else %}rgba(46,160,255,0.3){% endif %};">
      <i class="bi bi-{% if plan == 'pro' %}rocket-takeoff{% else %}star{% endif %}" style="font-size: 1.75rem; color: #fff;"></i>
    </div>
    <h2 style="color: #fff;">{% if current_lang == 'he' %}×ª×©×œ×•× ×¢×‘×•×¨ {{ plan|upper }}{% elif current_lang == 'en' %}Payment for {{ plan|upper }}{% else %}ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ·Ğ° {{ plan|upper }}{% endif %}</h2>
    <p class="text-muted">{% if current_lang == 'he' %}×× ×•×™ ×—×•×“×©×™ ×œ-OnePoweb{% elif current_lang == 'en' %}Monthly subscription to OnePoweb{% else %}ĞœĞµÑÑÑ‡Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° OnePoweb{% endif %}</p>
  </div>

  <!-- Order Summary -->
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="mb-4">
        <i class="bi bi-receipt me-2" style="color: #2ea0ff;"></i>
        {{ t('checkout_order_summary') }}
      </h5>
      
      <div class="d-flex justify-content-between mb-2">
        <span>{% if current_lang == 'he' %}×—×‘×™×œ×ª {{ plan|upper }} (×—×•×“×©×™){% elif current_lang == 'en' %}{{ plan|upper }} Plan (Monthly){% else %}ĞŸĞ»Ğ°Ğ½ {{ plan|upper }} (ĞœĞµÑÑÑ‡Ğ½Ñ‹Ğ¹){% endif %}</span>
        <span>â‚ª{{ base_price_ils }} / ${{ base_price_usd }}</span>
      </div>
      
      {% if referral_discount > 0 %}
      <div class="d-flex justify-content-between mb-2" style="color: #34d399;">
        <span><i class="bi bi-gift me-1"></i> {% if current_lang == 'he' %}×”× ×—×ª ×¨×¤×¨×œ ({{ referral_discount }}%){% elif current_lang == 'en' %}Referral Discount ({{ referral_discount }}%){% else %}Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞºĞ¸Ğ´ĞºĞ° ({{ referral_discount }}%){% endif %}</span>
        <span>-â‚ª{{ discount_ils }} / -${{ discount_usd }}</span>
      </div>
      <div class="small text-muted mb-2">
        <i class="bi bi-info-circle me-1"></i> {% if current_lang == 'he' %}×”× ×—×” ×—×“-×¤×¢××™×ª ××”×–×× ×ª ×—×‘×¨{% elif current_lang == 'en' %}One-time discount from friend's order{% else %}ĞĞ´Ğ½Ğ¾Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ÑĞºĞ¸Ğ´ĞºĞ° Ğ¾Ñ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ° Ğ´Ñ€ÑƒĞ³Ğ°{% endif %}
      </div>
      {% endif %}
      
      <hr style="border-color: var(--border);">
      
      <div class="d-flex justify-content-between" style="font-size: 1.25rem; font-weight: bold;">
        <span>{% if current_lang == 'he' %}×¡×”"×› ×œ×ª×©×œ×•×{% elif current_lang == 'en' %}Total to Pay{% else %}Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Ğº Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ{% endif %}</span>
        <span style="color: {% if plan == 'pro' %}#34d399{% else %}#34c3ff{% endif %};">
          ${{ net_price_usd }}
          <span class="text-muted small">(â‰ˆâ‚ª{{ net_price_ils }})</span>
        </span>
      </div>
    </div>
  </div>

  <!-- Plan Features -->
  <div class="card mb-4">
    <div class="card-body">
      <h6 class="mb-3">{% if current_lang == 'he' %}××” ×›×œ×•×œ ×‘×—×‘×™×œ×”:{% elif current_lang == 'en' %}What's included in the plan:{% else %}Ğ§Ñ‚Ğ¾ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ² Ğ¿Ğ»Ğ°Ğ½:{% endif %}</h6>
      <ul class="list-unstyled mb-0">
        {% if plan == 'pro' %}
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34d399;"></i> {% if current_lang == 'he' %}× ×™×ª×•×—×™× ×œ×œ× ×”×’×‘×œ×”{% elif current_lang == 'en' %}Unlimited analyses{% else %}ĞĞµĞ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ñ‹{% endif %}</li>
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34d399;"></i> {% if current_lang == 'he' %}×’×¨×¤×™× ××ª×§×“××™×{% elif current_lang == 'en' %}Advanced graphs{% else %}ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğµ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸{% endif %}</li>
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34d399;"></i> {% if current_lang == 'he' %}×™×™×¦×•× PDF ××•×ª××{% elif current_lang == 'en' %}Custom PDF export{% else %}ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¹ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ PDF{% endif %}</li>
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34d399;"></i> {% if current_lang == 'he' %}×ª×•×‘× ×•×ª AI ××•×ª×××•×ª ××™×©×™×ª{% elif current_lang == 'en' %}Personalized AI insights{% else %}ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ AI-Ğ¸Ğ½ÑĞ°Ğ¹Ñ‚Ñ‹{% endif %}</li>
        <li class="mb-0"><i class="bi bi-check-circle-fill me-2" style="color: #34d399;"></i> {% if current_lang == 'he' %}×ª××™×›×” ×¢×“×™×¤×•×ª{% elif current_lang == 'en' %}Priority support{% else %}ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°{% endif %}</li>
        {% else %}
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34c3ff;"></i> {% if current_lang == 'he' %}×¢×“ 50 × ×™×ª×•×—×™× ×‘×—×•×“×©{% elif current_lang == 'en' %}Up to 50 analyses per month{% else %}Ğ”Ğ¾ 50 Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ² Ğ² Ğ¼ĞµÑÑÑ†{% endif %}</li>
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34c3ff;"></i> {% if current_lang == 'he' %}×’×¨×¤×™× ×‘×¡×™×¡×™×™×{% elif current_lang == 'en' %}Basic graphs{% else %}Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸{% endif %}</li>
        <li class="mb-2"><i class="bi bi-check-circle-fill me-2" style="color: #34c3ff;"></i> {% if current_lang == 'he' %}×™×™×¦×•× PDF{% elif current_lang == 'en' %}PDF export{% else %}Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ PDF{% endif %}</li>
        <li class="mb-0"><i class="bi bi-check-circle-fill me-2" style="color: #34c3ff;"></i> {% if current_lang == 'he' %}×ª××™×›×” ×‘××™××™×™×œ{% elif current_lang == 'en' %}Email support{% else %}ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿Ğ¾ email{% endif %}</li>
        {% endif %}
      </ul>
    </div>
  </div>

  <!-- PayPal Button Container -->
  {% if paypal_client_id and paypal_client_id != 'YOUR_PAYPAL_CLIENT_ID' %}
  <div class="card mb-4">
    <div class="card-body">
      <h6 class="mb-3">
        <i class="bi bi-shield-check me-2" style="color: #34d399;"></i>
        {% if current_lang == 'he' %}×ª×©×œ×•× ×××•×‘×˜×—{% elif current_lang == 'en' %}Secure Payment{% else %}Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°{% endif %}
      </h6>
      
      <div id="paypal-button-container"></div>
      
      <div id="payment-status" class="text-center mt-3" style="display: none;">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">{% if current_lang == 'he' %}××¢×‘×“ ×ª×©×œ×•×...{% elif current_lang == 'en' %}Processing payment...{% else %}ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°...{% endif %}</span>
        </div>
        <p class="mt-2 text-muted">{% if current_lang == 'he' %}××¢×‘×“ ××ª ×”×ª×©×œ×•×...{% elif current_lang == 'en' %}Processing payment...{% else %}ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°...{% endif %}</p>
      </div>
      
      <p class="small text-muted text-center mt-3 mb-0">
        <i class="bi bi-lock me-1"></i>
        {% if current_lang == 'he' %}×”×ª×©×œ×•× ×××•×‘×˜×— ×•××•×¦×¤×Ÿ ×‘×××¦×¢×•×ª PayPal{% elif current_lang == 'en' %}Payment is secured and encrypted via PayPal{% else %}ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ğ° Ğ¸ Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ñ‡ĞµÑ€ĞµĞ· PayPal{% endif %}
      </p>
      
      {% if paypal_mode == 'sandbox' %}
      <!-- Sandbox Testing Instructions -->
      <div class="alert alert-info mt-3 mb-0" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px;">
        <div class="d-flex align-items-start">
          <i class="bi bi-info-circle me-2" style="font-size: 1.1rem; color: #3b82f6; margin-top: 2px;"></i>
          <div>
            <strong style="color: #3b82f6;">
              {% if current_lang == 'he' %}ğŸ§ª ××¦×‘ ×‘×“×™×§×” (Sandbox){% elif current_lang == 'en' %}ğŸ§ª Test Mode (Sandbox){% else %}ğŸ§ª Ğ ĞµĞ¶Ğ¸Ğ¼ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Sandbox){% endif %}
            </strong>
            <p class="small mb-2 mt-1" style="color: var(--text);">
              {% if current_lang == 'he' %}
                <strong>×œ×‘×“×™×§×” ×œ×œ× ×ª×©×œ×•× ×××™×ª×™:</strong><br>
                â€¢ ×”×©×ª××© ×‘×—×©×‘×•×Ÿ PayPal Sandbox (×¦×•×¨ ×‘-<a href="https://developer.paypal.com" target="_blank" style="color: #3b82f6;">developer.paypal.com</a>)<br>
                â€¢ ××• ×”×©×ª××© ×‘×›×¨×˜×™×¡×™ ×‘×“×™×§×”:<br>
                &nbsp;&nbsp;Visa: <code>4032 0312 3456 7890</code> (×ª××¨×™×š: ×›×œ ×¢×ª×™×“, CVV: ×›×œ 3 ×¡×¤×¨×•×ª)<br>
                &nbsp;&nbsp;Mastercard: <code>5555 5555 5555 4444</code><br>
                &nbsp;&nbsp;CVV: ×›×œ 3 ×¡×¤×¨×•×ª, ×ª××¨×™×š: ×›×œ ×¢×ª×™×“
              {% elif current_lang == 'en' %}
                <strong>To test without real payment:</strong><br>
                â€¢ Use a PayPal Sandbox account (create at <a href="https://developer.paypal.com" target="_blank" style="color: #3b82f6;">developer.paypal.com</a>)<br>
                â€¢ Or use test cards:<br>
                &nbsp;&nbsp;Visa: <code>4032 0312 3456 7890</code> (any future date, any 3-digit CVV)<br>
                &nbsp;&nbsp;Mastercard: <code>5555 5555 5555 4444</code><br>
                &nbsp;&nbsp;CVV: any 3 digits, Date: any future date
              {% else %}
                <strong>Ğ”Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ±ĞµĞ· Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹:</strong><br>
                â€¢ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ PayPal Sandbox (ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ° <a href="https://developer.paypal.com" target="_blank" style="color: #3b82f6;">developer.paypal.com</a>)<br>
                â€¢ Ğ˜Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹:<br>
                &nbsp;&nbsp;Visa: <code>4032 0312 3456 7890</code> (Ğ»ÑĞ±Ğ°Ñ Ğ±ÑƒĞ´ÑƒÑ‰Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°, Ğ»ÑĞ±Ğ¾Ğ¹ 3-Ğ·Ğ½Ğ°Ñ‡Ğ½Ñ‹Ğ¹ CVV)<br>
                &nbsp;&nbsp;Mastercard: <code>5555 5555 5555 4444</code><br>
                &nbsp;&nbsp;CVV: Ğ»ÑĞ±Ñ‹Ğµ 3 Ñ†Ğ¸Ñ„Ñ€Ñ‹, Ğ”Ğ°Ñ‚Ğ°: Ğ»ÑĞ±Ğ°Ñ Ğ±ÑƒĞ´ÑƒÑ‰Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°
              {% endif %}
            </p>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
  {% else %}
  <!-- Fallback when PayPal not configured -->
  <div class="card mb-4">
    <div class="card-body text-center">
      <div style="width: 48px; height: 48px; border-radius: 12px; background: rgba(251,191,36,0.15); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
        <i class="bi bi-exclamation-triangle" style="font-size: 1.25rem; color: #fbbf24;"></i>
      </div>
      <h6>××¢×¨×›×ª ×”×ª×©×œ×•× ×‘×”×§××”</h6>
      <p class="text-muted small mb-3">PayPal ×¢×“×™×™×Ÿ ×œ× ××•×’×“×¨. ×¦×•×¨ ×§×©×¨ ×œ×¤×¨×˜×™× × ×•×¡×¤×™×.</p>
      <a href="{{ url_for('contact') }}" class="btn btn-outline-primary">
        <i class="bi bi-envelope me-2"></i> ×¦×•×¨ ×§×©×¨
      </a>
    </div>
  </div>
  {% endif %}

  <!-- Back Button -->
  <div class="text-center">
    <a href="{{ url_for('profile') }}" class="btn" style="background: rgba(255,255,255,0.05); color: var(--text); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 10px 24px;">
      <i class="bi bi-arrow-right me-2"></i> ×—×–×¨×” ×œ×¤×¨×•×¤×™×œ
    </a>
  </div>
</div>

{% if paypal_client_id and paypal_client_id != 'YOUR_PAYPAL_CLIENT_ID' %}
<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id }}&currency=USD"></script>
<script>
const plan = "{{ plan }}";

paypal.Buttons({
  style: {
    layout: 'vertical',
    color: 'blue',
    shape: 'rect',
    label: 'pay',
    height: 45
  },
  
  // Create order on server
  createOrder: function(data, actions) {
    console.log('[PayPal] Creating order for plan:', plan);
    return fetch('/api/paypal/create-order', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ plan: plan })
    })
    .then(response => {
      console.log('[PayPal] Response status:', response.status);
      return response.json();
    })
    .then(data => {
      console.log('[PayPal] Response data:', data);
      if (data.error) {
        console.error('[PayPal] Error:', data.error);
        throw new Error(data.error);
      }
      // If payment not needed (credits cover it), redirect
      if (data.redirect) {
        window.location.href = data.redirect;
        return null;
      }
      console.log('[PayPal] Order created:', data.id);
      return data.id;
    })
    .catch(err => {
      console.error('[PayPal] Fetch error:', err);
      throw err;
    });
  },
  
  // Capture payment on server
  onApprove: function(data, actions) {
    document.getElementById('paypal-button-container').style.display = 'none';
    document.getElementById('payment-status').style.display = 'block';
    
    return fetch('/api/paypal/capture-order', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ orderID: data.orderID })
    })
    .then(response => {
      console.log('[PayPal] Capture response status:', response.status);
      console.log('[PayPal] Capture response ok:', response.ok);
      if (!response.ok) {
        return response.json().then(err => {
          console.error('[PayPal] Capture error response:', err);
          return Promise.reject(err);
        }).catch(() => {
          // If JSON parsing fails, return generic error
          return Promise.reject({error: `HTTP ${response.status}: ${response.statusText}`});
        });
      }
      return response.json().catch(err => {
        console.error('[PayPal] Failed to parse JSON:', err);
        return Promise.reject({error: 'Invalid response from server'});
      });
    })
    .then(result => {
      console.log('[PayPal] Capture result:', result);
      if (result.success && result.redirect) {
        console.log('[PayPal] Payment successful, redirecting to:', result.redirect);
        window.location.href = result.redirect;
      } else {
        const errorMsg = result.error || 'Unknown error';
        console.error('[PayPal] Capture error:', errorMsg);
        console.error('[PayPal] Full result:', JSON.stringify(result, null, 2));
        const lang = "{{ current_lang }}";
        let alertMsg;
        if (lang === 'he') {
          alertMsg = '×©×’×™××” ×‘×¢×™×‘×•×“ ×”×ª×©×œ×•×: ' + errorMsg + '\n\n×× × × ×¡×” ×©×•×‘ ××• ×¦×•×¨ ×§×©×¨ ×œ×ª××™×›×”.';
        } else if (lang === 'en') {
          alertMsg = 'Payment processing error: ' + errorMsg + '\n\nPlease try again or contact support.';
        } else {
          alertMsg = 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°: ' + errorMsg + '\n\nĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ° Ğ¸Ğ»Ğ¸ ÑĞ²ÑĞ¶Ğ¸Ñ‚ĞµÑÑŒ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹.';
        }
        alert(alertMsg);
        document.getElementById('paypal-button-container').style.display = 'block';
        document.getElementById('payment-status').style.display = 'none';
      }
    })
    .catch(err => {
      console.error('[PayPal] Capture fetch error:', err);
      const lang = "{{ current_lang }}";
      const alertMsg = lang === 'he'
        ? '×©×’×™××” ×‘×¢×™×‘×•×“ ×”×ª×©×œ×•×. × ×¡×” ×©×•×‘ ××• ×¦×•×¨ ×§×©×¨.'
        : lang === 'en'
        ? 'Payment processing error. Try again or contact us.'
        : 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ° Ğ¸Ğ»Ğ¸ ÑĞ²ÑĞ¶Ğ¸Ñ‚ĞµÑÑŒ Ñ Ğ½Ğ°Ğ¼Ğ¸.';
      alert(alertMsg);
      document.getElementById('paypal-button-container').style.display = 'block';
      document.getElementById('payment-status').style.display = 'none';
    });
  },
  
  onError: function(err) {
    console.error('PayPal Error:', err);
    const lang = "{{ current_lang }}";
    const alertMsg = lang === 'he'
      ? '×©×’×™××” ×‘×ª×©×œ×•×. × ×¡×” ×©×•×‘ ××• ×¦×•×¨ ×§×©×¨.'
      : lang === 'en'
      ? 'Payment error. Try again or contact us.'
      : 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ° Ğ¸Ğ»Ğ¸ ÑĞ²ÑĞ¶Ğ¸Ñ‚ĞµÑÑŒ Ñ Ğ½Ğ°Ğ¼Ğ¸.';
    alert(alertMsg);
  },
  
  onCancel: function(data) {
    console.log('Payment cancelled');
  }
}).render('#paypal-button-container');
</script>
{% endif %}
{% endblock %}

